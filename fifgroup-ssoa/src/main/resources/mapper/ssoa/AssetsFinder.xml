<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="co.id.fifgroup.ssoa.finder.AssetFinder">
	<resultMap id="BaseResultMap" type="co.id.fifgroup.ssoa.dto.AssetDTO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 27 
			20:51:34 ICT 2013. -->
	    <id column="ASSET_ID" property="id" jdbcType="VARCHAR" />
	    <result column="EBS_ASSET_ID" property="ebsAssetId" jdbcType="VARCHAR" />	
	    <result column="ASSET_NUMBER" property="assetNumber" jdbcType="VARCHAR" />	
	    <result column="SERIAL_NUMBER" property="serialNumber" jdbcType="VARCHAR" />	
	    <result column="TAG_NUMBER" property="tagNumber" jdbcType="VARCHAR" />
	    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
	    <result column="CATEGORY_ID" property="categoryId" jdbcType="DECIMAL" />
	    <result column="COMPANY_ID" property="companyId" jdbcType="VARCHAR" />
	    <result column="BRANCH_ID" property="branchId" jdbcType="NUMERIC" />	
	    <result column="LOCATION_ID" property="locationId" jdbcType="VARCHAR" />
	    <result column="POSITION" property="position" jdbcType="VARCHAR" />		
	    <result column="DATE_PLACED_IN_SERVICE" property="datePlacedInService" jdbcType="TIMESTAMP" />	
	    <result column="LIFE_IN_MONTHS" property="lifeInMonths" jdbcType="DECIMAL" />	
	    <result column="ORIGINAL_COST" property="originalCost" jdbcType="DECIMAL" />	
	    <result column="UNREVALUED_COST" property="unrevaluedCost" jdbcType="DECIMAL" />	
	    <result column="BOOK_TYPE_CODE" property="bookTypeCode" jdbcType="VARCHAR" />
	    <result column="LAST_PRINTED_DATE" property="lastPrintedDate" jdbcType="TIMESTAMP" />	
	    <result column="PRINTED_COUNT" property="printedCount" jdbcType="DECIMAL" />		
	    <result column="CREATED_BY" property="createdBy" jdbcType="DECIMAL" />
	    <result column="CREATION_DATE" property="creationDate" jdbcType="TIMESTAMP" />
	    <result column="LAST_UPDATED_BY" property="lastUpdatedBy" jdbcType="DECIMAL" />
	    <result column="LAST_UPDATE_DATE" property="lastUpdateDate" jdbcType="TIMESTAMP" />
	    <result column="START_DATE" property="startDate" jdbcType="TIMESTAMP" />
	    <result column="END_DATE" property="endDate" jdbcType="TIMESTAMP" />
	    <result column="USER_NAME" property="userName" jdbcType="VARCHAR" />
	</resultMap>

	<select id="selectByExample" resultMap="BaseResultMap"
		parameterType="co.id.fifgroup.ssoa.domain.Assets">
		SELECT DISTINCT
		SA.ASSET_ID,
		SA.EBS_ASSET_ID,
		SA.ASSET_NUMBER,
		SA.SERIAL_NUMBER,
		SA.TAG_NUMBER,
		SA.DESCRIPTION,
		SA.CATEGORY_ID,
		SA.COMPANY_ID,
		SA.BRANCH_ID,
		SA.LOCATION_ID,
		SA.POSITION,
		SA.DATE_PLACED_IN_SERVICE,
		SA.LIFE_IN_MONTHS,
		SA.LOCATION_ID,
		SA.ORIGINAL_COST,
		SA.UNREVALUED_COST,
		SA.BOOK_TYPE_CODE,
		SA.LAST_PRINTED_DATE,
		SA.PRINTED_COUNT,
		SA.CREATED_BY,
		SA.CREATION_DATE,
		SA.LAST_UPDATE_DATE,
		SA.LAST_UPDATE_BY,
		U.USER_NAME
		FROM
		SOC_ASSETS SA
		LEFT JOIN SAM_USERS U ON U.USER_ID = SA.LAST_UPDATE_BY
		<where>
		    <if test="example.startDate != null">
				TRUNC(SA.DATE_PLACED_IN_SERVICE) BETWEEN TRUNC(#{example.startDate,jdbcType=TIMESTAMP}) AND TRUNC(#{example.endDate,jdbcType=TIMESTAMP})
			</if>
			<if test="example.assetNumber != ''">
				 AND UPPER(SA.ASSET_NUMBER) LIKE
				(UPPER(#{example.assetNumber,jdbcType=VARCHAR}))
			</if>
		</where>
		ORDER BY
		SA.ASSET_ID
	</select>

	<select id="countByExample" resultType="int"
		parameterType="co.id.fifgroup.ssoa.domain.AssetLabeling">
		SELECT count(*)
		FROM SSOA.SSOA_ASSETS SA
	
	</select>


</mapper>