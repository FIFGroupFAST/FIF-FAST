<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.id.fifgroup.ssoa.dao.AssetTransferDetailMapper">
  <resultMap id="BaseResultMap" type="co.id.fifgroup.ssoa.dto.AssetTransferDetailDTO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    <id column="TRANSFER_DTL_ID" jdbcType="DECIMAL" property="transferDtlId" />
    <result column="TRANSFER_ID" jdbcType="DECIMAL" property="transferId" />
    <result column="STOCK_OPNAME_DTL_ID" jdbcType="DECIMAL" property="stockOpnameDtlId" />
    <result column="ASSET_ID" jdbcType="DECIMAL" property="assetId" />
    <result column="CREATED_BY" jdbcType="DECIMAL" property="createdBy" />
    <result column="CREATION_DATE" jdbcType="TIMESTAMP" property="creationDate" />
    <result column="LAST_UPDATE_BY" jdbcType="DECIMAL" property="lastUpdateBy" />
    <result column="LAST_UPDATE_DATE" jdbcType="TIMESTAMP" property="lastUpdateDate" />
    <result column="BOOK_TYPE_CODE" jdbcType="VARCHAR" property="bookTypeCode" />
    <result column="BRANCH_ID" jdbcType="DECIMAL" property="branchId" />
    
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
	    TRANSFER_DTL_ID,
	    TRANSFER_ID,
	    STOCK_OPNAME_DTL_ID, 
	    ASSET_ID,
	    CREATED_BY, 
	    CREATION_DATE, 
	    LAST_UPDATE_BY, 
	    LAST_UPDATE_DATE
  </sql>
  <select id="selectByExample" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetailExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    'false' as QUERYID,
    <include refid="Base_Column_List" />
    from SOC_TRANSFER_DTL
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select 'false' as QUERYID,
    <include refid="Base_Column_List" />
    from SOC_TRANSFER_DTL
    where TRANSFER_DTL_ID = #{transferDtlId,jdbcType=DECIMAL}
  </select>
  
  <select id="selectByHeaderKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select 'false' as QUERYID,
    TRANSFER_DTL_ID,
    TH.BRANCH_DESTINATION as BRANCH_ID,
    TH.TRANSFER_ID,
    BOOK_TYPE_CODE,
    STOCK_OPNAME_DTL_ID, 
    A.ASSET_ID,
    TD.CREATED_BY, 
    TD.CREATION_DATE, 
    TD.LAST_UPDATE_BY, 
    TD.LAST_UPDATE_DATE
    from SOC_TRANSFER_DTL td
    inner join SOC_TRANSFER_HDR th on th.transfer_id= td.transfer_id 
    left join SOC_ASSETS A on td.asset_id = A.asset_id
    left join SOC_EBS_CATEGORIES C on A.category_id = C.category_id
    left join SOC_ACCOUNT AC on C.segment1 = AC.ASSET_CATEGORIES
    where TD.TRANSFER_ID = #{transferId,jdbcType=DECIMAL}
  </select>
  
  
  <resultMap id="detailAssets" type="co.id.fifgroup.ssoa.dto.AssetTransferDetailDTO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 27 
			20:51:34 ICT 2013. -->
		  <id column="ASSET_ID" jdbcType="DECIMAL"
			property="assetId" />
		<result column="EBS_ASSET_ID" jdbcType="DECIMAL" property="ebsAssetId" />
        <result column="ASSET_NUMBER" jdbcType="VARCHAR" property="assetNumber" />
		<result column="TAG_NUMBER" jdbcType="DECIMAL" property="tagNumber" />
		<result column="SERIAL_NUMBER" jdbcType="VARCHAR" property="serialNumber" />
		<result column="DESCRIPTION" jdbcType="VARCHAR" property="description" />
		<result column="CATEGORY_ID" jdbcType="DECIMAL" property="categoryId" />
		<result column="COMPANY_ID" jdbcType="DECIMAL" property="companyId" />
		<result column="BRANCH_ID" jdbcType="DECIMAL" property="branchId" />
		<result column="BRANCH_CODE" jdbcType="VARCHAR" property="branchCode" />
		<result column="BRANCH_NAME" jdbcType="VARCHAR" property="branchName" />
		<result column="LOCATION_ID" jdbcType="VARCHAR" property="locationId" />
		<result column="LOCATION_CODE" jdbcType="VARCHAR" property="locationCode" />
		<result column="LOCATION_NAME" jdbcType="VARCHAR" property="locationName" />
		<result column="POSITION" jdbcType="VARCHAR" property="position" />
		
		<result column="DATE_PLACED_IN_SERVICE" jdbcType="DATE" property="datePlacedInService" />
		<result column="LIFE_IN_MONTHS" jdbcType="DECIMAL" property="lifeInMonths" />
		
		<result column="ORIGINAL_COST" jdbcType="DECIMAL" property="originalCost" />
		<result column="UNREVALUED_COST" jdbcType="DECIMAL" property="unrevaluedCost" />
		<result column="BOOK_TYPE_CODE" jdbcType="VARCHAR" property="bookTypeCode" />
		<result column="LAST_PRINTED_DATE" jdbcType="TIMESTAMP" property="lastPrintedDate" />
		<result column="PRINTED_COUNT" jdbcType="DECIMAL" property="printedCount" />
		<result column="CREATED_BY" jdbcType="DECIMAL" property="createdBy" />
		<result column="CREATION_DATE" jdbcType="TIMESTAMP" property="creationDate" />
		<result column="LAST_UPDATE_BY" jdbcType="DECIMAL" property="lastUpdateBy" />
		<result column="LAST_UPDATE_DATE" jdbcType="TIMESTAMP" property="lastUpdateDate" />
		<result column="STOCK_OPNAME_DTL_ID" jdbcType="DECIMAL" property="stockOpnameDtlId" />
		<result column="LOCATION_NAME" jdbcType="VARCHAR" property="locationName" />
		<result column="SO_RESULT" jdbcType="VARCHAR" property="stockOpnameResult" />
		<result column="SO_SUGEST" jdbcType="VARCHAR" property="stockOpnameSugest" />
		<result column="SO_HO_SUGEST" jdbcType="VARCHAR" property="stockOpnameHoSugest" />
		<result column="STOCK_OPNAME_DETAIL_ID" jdbcType="VARCHAR" property="stockOpnameDtlId" />
		<result column="ASSET_TYPE_NAME" jdbcType="VARCHAR" property="assetTypeName" />
		<result column="CATEGORY_NAME" jdbcType="VARCHAR" property="categoryName" />
  </resultMap>
  
    <select id="selectDetailByHeaderId" resultMap="detailAssets"
		parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetailExample">
		SELECT DISTINCT
	        A.ASSET_ID,
	        A.ASSET_TYPE_CODE,
	        (select description from bse_lookup_dependents where detail_code= A.ASSET_TYPE_CODE) as ASSET_TYPE_NAME,
	        (select segment1 from SOC_EBS_CATEGORIES where category_id =A.CATEGORY_ID) as CATEGORY_NAME,
	        A.EBS_ASSET_ID,
	        A.ASSET_NUMBER,
			A.TAG_NUMBER,
			A.SERIAL_NUMBER,
			A.DESCRIPTION,
			A.CATEGORY_ID,
			A.COMPANY_ID,
			A.BRANCH_ID,
			(case when A.BRANCH_ID = -1 then 'HEADOFFICE' else (SELECT SUBSTR (ORGANIZATION_CODE, -5) as branch_code from WOS_ORGANIZATIONS where ORGANIZATION_ID = A.BRANCH_ID and rownum = 1) end )BRANCH_CODE,
		    (case when A.BRANCH_ID = -1 then 'Head Office' else (SELECT ORGANIZATION_NAME from WOS_ORGANIZATIONS where ORGANIZATION_ID = A.BRANCH_ID and rownum = 1) end )BRANCH_NAME,
			A.LOCATION_ID,
			(SELECT LOCATION_CODE
                FROM WOS_LOCATIONS
               WHERE LOCATION_ID = A.LOCATION_ID AND ROWNUM = 1)
                LOCATION_CODE,
             (SELECT LOCATION_NAME
                FROM WOS_LOCATIONS
               WHERE LOCATION_ID = A.LOCATION_ID AND ROWNUM = 1)
                LOCATION_NAME,
			A.POSITION,
			A.DATE_PLACED_IN_SERVICE,
			A.LIFE_IN_MONTHS,
			A.ORIGINAL_COST,
			A.UNREVALUED_COST,
			A.BOOK_TYPE_CODE,
			A.LAST_PRINTED_DATE,
			A.PRINTED_COUNT,
			A.CREATED_BY, 
			A.CREATION_DATE, 
			A.LAST_UPDATE_BY, 
			A.LAST_UPDATE_DATE,
			(select description from BSE_LOOKUP_DEPENDENTS where DETAIL_CODE = (select OPNAME_RESULT_CODE from SOC_STOCK_OPNAME_DTL SD INNER JOIN SOC_STOCK_OPNAME_HDR HD ON SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID AND  HD.STATUS_CODE = 'SO_STATUS_APPROVED' WHERE SD.ASSET_ID = A.ASSET_ID and rownum=1) and rownum =1 )
                  AS SO_RESULT,
            (select description from BSE_LOOKUP_DEPENDENTS where DETAIL_CODE = (select OPNAME_SUGEST_CODE from SOC_STOCK_OPNAME_DTL SD INNER JOIN SOC_STOCK_OPNAME_HDR HD ON SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID AND  HD.STATUS_CODE = 'SO_STATUS_APPROVED' WHERE SD.ASSET_ID = A.ASSET_ID and rownum=1) and rownum =1 )
                  AS SO_SUGEST,
            (select description from BSE_LOOKUP_DEPENDENTS where DETAIL_CODE = (select OPNAME_HO_SUGEST_CODE from SOC_STOCK_OPNAME_DTL SD INNER JOIN SOC_STOCK_OPNAME_HDR HD ON SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID AND  HD.STATUS_CODE = 'SO_STATUS_APPROVED' WHERE SD.ASSET_ID = A.ASSET_ID and rownum=1) and rownum =1 )
                  AS SO_HO_SUGEST,
            (select STOCK_OPNAME_DTL_ID from SOC_STOCK_OPNAME_DTL SD INNER JOIN SOC_STOCK_OPNAME_HDR HD ON SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID AND  HD.STATUS_CODE = 'SO_STATUS_APPROVED' WHERE SD.ASSET_ID = A.ASSET_ID and rownum=1)STOCK_OPNAME_DTL_ID
		FROM SOC_ASSETS A
			INNER JOIN SOC_TRANSFER_DTL TD on TD.ASSET_ID = A.ASSET_ID
			INNER JOIN SOC_TRANSFER_HDR TH on TH.TRANSFER_ID = TD.TRANSFER_ID
			
 		<where>
			TH.TRANSFER_ID = #{example.id,jdbcType=DECIMAL}
		</where>
		ORDER BY
		 A.LAST_UPDATE_DATE ASC
	</select>

  
  <resultMap id="detailBast" type="co.id.fifgroup.ssoa.domain.AssetTransferBast">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Wed Feb 27 
			20:51:34 ICT 2013. -->
		  <id column="TRANSFER_BAST_ID" jdbcType="DECIMAL"
			property="transferBastId" />
		<result column="TRANSFER_ID" jdbcType="DECIMAL" property="transferId" />
        <result column="BAST_DOC_NAME" jdbcType="VARCHAR" property="bastDocName" />
		<result column="BAST_DOC_PATH" jdbcType="DECIMAL" property="bastDocPath" />
		<result column="CREATED_BY" jdbcType="DECIMAL" property="createdBy" />
		<result column="CREATION_DATE" jdbcType="TIMESTAMP" property="creationDate" />
		<result column="LAST_UPDATE_BY" jdbcType="DECIMAL" property="lastUpdateBy" />
		<result column="LAST_UPDATE_DATE" jdbcType="TIMESTAMP" property="lastUpdateDate" />
  </resultMap>
  
    <select id="selectDetailBastByHeaderId" resultMap="detailBast"
		parameterType="co.id.fifgroup.ssoa.domain.AssetTransferBast">
		SELECT DISTINCT
	        TRANSFER_BAST_ID,
	        TRANSFER_ID,
	        BAST_DOC_NAME,
			BAST_DOC_PATH,
			CREATED_BY, 
			CREATION_DATE, 
			LAST_UPDATE_BY, 
			LAST_UPDATE_DATE
		FROM SOC_TRANSFER_BAST
 		<where>
			TRANSFER_ID = #{example.transferId,jdbcType=DECIMAL}
		</where>
		ORDER BY
		 LAST_UPDATE_DATE ASC
	</select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    delete from SOC_TRANSFER_DTL
    where TRANSFER_DTL_ID = #{transferDtlId,jdbcType=DECIMAL}
  </delete>
  
  <delete id="deleteByHeaderKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    delete from SOC_TRANSFER_DTL
    where TRANSFER_DTL_ID = #{transferDtlId,jdbcType=DECIMAL}
  </delete>
  
  <insert id="insert" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    <selectKey keyProperty="transferDtlId" order="BEFORE" resultType="java.lang.Long">
      select SOC_TRANSFER_DTL_S.nextVal from dual
    </selectKey>
    
    insert into SOC_TRANSFER_DTL (
    	TRANSFER_DTL_ID,
    	TRANSFER_ID,
    	STOCK_OPNAME_DTL_ID,
    	ASSET_ID,
      	CREATED_BY, 
      	CREATION_DATE, 
      	LAST_UPDATE_BY, 
      	LAST_UPDATE_DATE)
    values (
    	#{transferDtlId,jdbcType=DECIMAL},
    	#{transferId,jdbcType=DECIMAL},
    	<!-- #{stockOpnameDtlId,jdbcType=DECIMAL}, -->
    	(select distinct
		    SOD.stock_opname_dtl_id
			from SOC_STOCK_OPNAME_DTL SOD
		    	Inner join SOC_ASSETS A on A.ASSET_ID =  SOD.ASSET_ID
		    	inner join SOC_STOCK_OPNAME_HDR SOH on SOH.STOCK_OPNAME_ID = SOD.STOCK_OPNAME_ID
			where SOH.STATUS_CODE= 'SO_STATUS_APPROVED'
    			   and A.ASSET_ID= #{assetId,jdbcType=DECIMAL} 
    		),	 
    	#{assetId,jdbcType=DECIMAL},
      	#{createdBy,jdbcType=DECIMAL}, 
      	#{creationDate,jdbcType=TIMESTAMP}, 
      	#{lastUpdateBy,jdbcType=DECIMAL}, 
      	#{lastUpdateDate,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    insert into SOC_TRANSFER_DTL
    <trim prefix="(" suffix=")" suffixOverrides=",">
      TRANSFER_DTL_ID,
      <if test="assetId != null">
        ASSET_ID,
      </if>
      <if test="createdBy != null">
        CREATED_BY,
      </if>
      <if test="creationDate != null">
        CREATION_DATE,
      </if>
      <if test="lastUpdateBy != null">
        LAST_UPDATE_BY,
      </if>
      <if test="lastUpdateDate != null">
        LAST_UPDATE_DATE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      #{transferDtlId,jdbcType=DECIMAL},
      <!--  <if test="parameterHdrId != null">
        #{parameterDtlName,jdbcType=VARCHAR},
      </if>
      -->
      <if test="createdBy != null">
        #{createdBy,jdbcType=DECIMAL},
      </if>
      <if test="creationDate != null">
        #{creationDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateBy != null">
        #{lastUpdateBy,jdbcType=DECIMAL},
      </if>
      <if test="lastUpdateDate != null">
        #{lastUpdateDate,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetailExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select count(*) from SOC_TRANSFER_DTL
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    update SOC_TRANSFER_DTL
    <set>
      <if test="record.transferDtlId != null">
        TRANSFER_DTL_ID = #{record.transferDtlId,jdbcType=DECIMAL},
      </if>
      <if test="stockOpnameDtlId != null">
        STOCK_OPNAME_DTL_ID = #{record.stockOpnameDTLId,jdbcType=DECIMAL},
      </if>
      <if test="record.createdBy != null">
        CREATED_BY = #{record.createdBy,jdbcType=DECIMAL},
      </if>
      <if test="record.creationDate != null">
        CREATION_DATE = #{record.creationDate,jdbcType=TIMESTAMP},
      </if>
      <if test="record.lastUpdateBy != null">
        LAST_UPDATE_BY = #{record.lastUpdateBy,jdbcType=DECIMAL},
      </if>
      <if test="record.lastUpdateDate != null">
        LAST_UPDATE_DATE = #{record.lastUpdateDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    
    update SOC_STOCK_OPNAME_DTL
    set STOCK_OPNAME_ID = #{record.stockOpnameId,jdbcType=DECIMAL},
      ASSET_ID = #{record.assetId,jdbcType=DECIMAL},
      OPNAME_RESULT = #{record.opnameResult,jdbcType=VARCHAR},
      OPNAME_SUGEST = #{record.opnameSugest,jdbcType=VARCHAR},
      OPNAME_HO_SUGEST = #{record.opnameHOSugest,jdbcType=VARCHAR},
      CREATED_BY = #{record.createdBy,jdbcType=DECIMAL},
      CREATION_DATE = #{record.creationDate,jdbcType=TIMESTAMP},
      LAST_UPDATE_BY = #{record.lastUpdateBy,jdbcType=DECIMAL},
      LAST_UPDATE_DATE = #{record.lastUpdateDate,jdbcType=TIMESTAMP}
      
      -->
      
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    update SOC_TRANSFER_DTL
    <set>
      <if test="assetId != null">
        ASSET_ID = #{assetId,jdbcType=DECIMAL},
      </if>
      <if test="createdBy != null">
        CREATED_BY = #{createdBy,jdbcType=DECIMAL},
      </if>
      <if test="creationDate != null">
        CREATION_DATE = #{creationDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastUpdateBy != null">
        LAST_UPDATE_BY = #{lastUpdateBy,jdbcType=DECIMAL},
      </if>
      <if test="lastUpdateDate != null">
        LAST_UPDATE_DATE = #{lastUpdateDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    where TRANSFER_DTL_ID = #{transferDtlId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    update SOC_TRANSFER_DTL
    set STOCK_OPNAME_DTL_ID = #{stockOpnameDtlId,jdbcType=DECIMAL},
      ASSET_ID = #{assetId,jdbcType=DECIMAL},
      CREATED_BY = #{createdBy,jdbcType=DECIMAL},
      CREATION_DATE = #{creationDate,jdbcType=TIMESTAMP},
      LAST_UPDATE_BY = #{lastUpdateBy,jdbcType=DECIMAL},
      LAST_UPDATE_DATE = #{lastUpdateDate,jdbcType=TIMESTAMP}
    where TRANSFER_DTL_ID = #{transferDtlId,jdbcType=DECIMAL}
  </update>
  <select id="selectByExampleWithRowbounds" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetailExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    'false' as QUERYID,
    <include refid="Base_Column_List" />
    from SOC_TRANSFER_DTL
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  
  <select id="selectAssetSODtlByCriteria" resultMap="detailAssets"
		parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetailExample">
		
	 SELECT distinct A.*
    FROM (SELECT DISTINCT
                 A.ASSET_ID,
                 A.ASSET_TYPE_CODE,
                 (SELECT description
                    FROM bse_lookup_dependents
                   WHERE detail_code = A.ASSET_TYPE_CODE)
                    AS ASSET_TYPE_NAME,
                 (SELECT segment1
                    FROM SOC_EBS_CATEGORIES
                   WHERE category_id = A.CATEGORY_ID)
                    AS CATEGORY_NAME,
                 A.EBS_ASSET_ID,
                 A.ASSET_NUMBER,
                 A.TAG_NUMBER,
                 A.SERIAL_NUMBER,
                 A.DESCRIPTION,
                 A.CATEGORY_ID,
                 A.COMPANY_ID,
                 A.BRANCH_ID,
                 (CASE
                     WHEN A.BRANCH_ID = -1
                     THEN
                        'HEADOFFICE'
                     ELSE
                        (SELECT SUBSTR (ORGANIZATION_CODE, -5) as branch_code
                           FROM WOS_ORGANIZATIONS
                          WHERE ORGANIZATION_ID = A.BRANCH_ID AND ROWNUM = 1)
                  END)
                    BRANCH_CODE,
                 (CASE
                     WHEN A.BRANCH_ID = -1
                     THEN
                        'Head Office'
                     ELSE
                        (SELECT ORGANIZATION_NAME
                           FROM WOS_ORGANIZATIONS
                          WHERE ORGANIZATION_ID = A.BRANCH_ID AND ROWNUM = 1)
                  END)
                    BRANCH_NAME,
                 A.LOCATION_ID,
                 (SELECT LOCATION_CODE
                    FROM WOS_LOCATIONS
                   WHERE LOCATION_ID = A.LOCATION_ID AND ROWNUM = 1)
                    LOCATION_CODE,
                 (SELECT LOCATION_NAME
                    FROM WOS_LOCATIONS
                   WHERE LOCATION_ID = A.LOCATION_ID AND ROWNUM = 1)
                    LOCATION_NAME,
                 A.POSITION,
                 A.retired_flag,
                 A.DATE_PLACED_IN_SERVICE,
                 A.LIFE_IN_MONTHS,
                 A.ORIGINAL_COST,
                 A.UNREVALUED_COST,
                 A.BOOK_TYPE_CODE,
                 A.LAST_PRINTED_DATE,
                 A.PRINTED_COUNT,
                 A.CREATED_BY,
                 A.CREATION_DATE,
                 A.LAST_UPDATE_BY,
                 A.LAST_UPDATE_DATE,
                 (SELECT bld.description SO_SUGEST
                    FROM SOC_STOCK_OPNAME_DTL SD
                         INNER JOIN SOC_STOCK_OPNAME_HDR HD
                            ON     HD.STOCK_OPNAME_ID = SD.STOCK_OPNAME_ID
                               AND HD.STATUS_CODE = 'SO_STATUS_APPROVED'
                         inner JOIN BSE_LOOKUP_DEPENDENTS bld
                            ON bld.DETAIL_CODE = SD.OPNAME_SUGEST_CODE
                   WHERE     SD.ASSET_ID = A.ASSET_ID
                         AND hd.branch_id = A.branch_id
                         AND hd.company_id = A.company_id
                         AND ROWNUM = 1)
                    SO_SUGEST
            FROM SOC_ASSETS A
                 INNER JOIN SAM_USERS U ON U.USER_ID = A.LAST_UPDATE_BY
           WHERE A.asset_id NOT IN (SELECT asset_id
                                      FROM soc_transfer_dtl td
                                           INNER JOIN soc_transfer_hdr th
                                              ON th.transfer_id =
                                                    td.transfer_id
                                     WHERE     th.branch_id = A.branch_id
                                           AND th.status_code IN ('ASSET_TRANSFER_APPROVED',
                                                                  'ASSET_TRANSFER_INPROCESS',
                                                                  'ASSET_TRANSFER_COMPLETED'))                                               
     union all
        SELECT DISTINCT
                 A.ASSET_ID,
                 A.ASSET_TYPE_CODE,
                 (SELECT description
                    FROM bse_lookup_dependents
                   WHERE detail_code = A.ASSET_TYPE_CODE)
                    AS ASSET_TYPE_NAME,
                 (SELECT segment1
                    FROM SOC_EBS_CATEGORIES
                   WHERE category_id = A.CATEGORY_ID)
                    AS CATEGORY_NAME,
                 A.EBS_ASSET_ID,
                 A.ASSET_NUMBER,
                 A.TAG_NUMBER,
                 A.SERIAL_NUMBER,
                 A.DESCRIPTION,
                 A.CATEGORY_ID,
                 A.COMPANY_ID,
                 A.BRANCH_ID,
                 (CASE
                     WHEN A.BRANCH_ID = -1
                     THEN
                        'HEADOFFICE'
                     ELSE
                        (SELECT SUBSTR (ORGANIZATION_CODE, -5) as branch_code
                           FROM WOS_ORGANIZATIONS
                          WHERE ORGANIZATION_ID = A.BRANCH_ID AND ROWNUM = 1)
                  END)
                    BRANCH_CODE,
                 (CASE
                     WHEN A.BRANCH_ID = -1
                     THEN
                        'Head Office'
                     ELSE
                        (SELECT ORGANIZATION_NAME
                           FROM WOS_ORGANIZATIONS
                          WHERE ORGANIZATION_ID = A.BRANCH_ID AND ROWNUM = 1)
                  END)
                    BRANCH_NAME,
                 A.LOCATION_ID,
                 (SELECT LOCATION_CODE
                    FROM WOS_LOCATIONS
                   WHERE LOCATION_ID = A.LOCATION_ID AND ROWNUM = 1)
                    LOCATION_CODE,
                 (SELECT LOCATION_NAME
                    FROM WOS_LOCATIONS
                   WHERE LOCATION_ID = A.LOCATION_ID AND ROWNUM = 1)
                    LOCATION_NAME,
                 A.POSITION,
                 A.retired_flag,
                 A.DATE_PLACED_IN_SERVICE,
                 A.LIFE_IN_MONTHS,
                 A.ORIGINAL_COST,
                 A.UNREVALUED_COST,
                 A.BOOK_TYPE_CODE,
                 A.LAST_PRINTED_DATE,
                 A.PRINTED_COUNT,
                 A.CREATED_BY,
                 A.CREATION_DATE,
                 A.LAST_UPDATE_BY,
                 A.LAST_UPDATE_DATE,
                 (SELECT bld.description SO_SUGEST
                    FROM SOC_STOCK_OPNAME_UNREG_ASSETS SUA
                         INNER JOIN SOC_STOCK_OPNAME_HDR HD
                            ON     HD.STOCK_OPNAME_ID = SUA.STOCK_OPNAME_ID
                               AND HD.STATUS_CODE = 'SO_STATUS_APPROVED'
                         inner JOIN BSE_LOOKUP_DEPENDENTS bld
                            ON bld.DETAIL_CODE = SUA.OPNAME_SUGEST_CODE
                   WHERE     SUA.ASSET_ID = A.ASSET_ID
                         AND sua.branch_id = A.branch_id
                         AND hd.company_id = A.company_id
                         AND ROWNUM = 1)
                    SO_SUGEST
            FROM SOC_ASSETS A
                 INNER JOIN SAM_USERS U ON U.USER_ID = A.LAST_UPDATE_BY
           WHERE A.asset_id NOT IN (SELECT asset_id
                                      FROM soc_transfer_dtl td
                                           INNER JOIN soc_transfer_hdr th
                                              ON th.transfer_id =
                                                    td.transfer_id
                                     WHERE     th.branch_id = A.branch_id
                                           AND th.status_code IN ('ASSET_TRANSFER_APPROVED',
                                                                  'ASSET_TRANSFER_INPROCESS',
                                                                  'ASSET_TRANSFER_COMPLETED')))A
	 <if test="_parameter != null">
            <include refid="Example_Where_Clause" />
       </if>
        and A.asset_number is not null
	<if test="orderByClause != null">
             order by ${orderByClause}
    	</if>
	</select>
  
  <select id="countAssetSODtlByCriteria" parameterType="co.id.fifgroup.ssoa.domain.AssetTransferDetailExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    SELECT count(1) FROM(
		SELECT DISTINCT
	        A.ASSET_ID,
	        A.ASSET_TYPE_CODE,
	        (select description from bse_lookup_dependents where detail_code= A.ASSET_TYPE_CODE) as ASSET_TYPE_NAME,
	        (select segment1 from SOC_EBS_CATEGORIES where category_id =A.CATEGORY_ID) as CATEGORY_NAME,
            A.EBS_ASSET_ID,
            A.ASSET_NUMBER,
            A.retired_flag,
            A.TAG_NUMBER,
            A.SERIAL_NUMBER,
            A.DESCRIPTION,
            A.CATEGORY_ID,
            A.COMPANY_ID,
            A.BRANCH_ID,
            (case when A.BRANCH_ID = -1 then 'HEADOFFICE' else (SELECT SUBSTR (ORGANIZATION_CODE, -5) as branch_code from WOS_ORGANIZATIONS where ORGANIZATION_ID = A.BRANCH_ID and rownum = 1) end )BRANCH_CODE,
		    (case when A.BRANCH_ID = -1 then 'Head Office' else (SELECT ORGANIZATION_NAME from WOS_ORGANIZATIONS where ORGANIZATION_ID = A.BRANCH_ID and rownum = 1) end )BRANCH_NAME,
            A.LOCATION_ID,
           (SELECT LOCATION_CODE from WOS_LOCATIONS where LOCATION_ID = A.LOCATION_ID and rownum =1) LOCATION_CODE,
           (SELECT LOCATION_NAME from WOS_LOCATIONS where LOCATION_ID = A.LOCATION_ID and rownum =1) LOCATION_NAME,
            A.POSITION,
            A.DATE_PLACED_IN_SERVICE,
            A.LIFE_IN_MONTHS,
            A.ORIGINAL_COST,
            A.UNREVALUED_COST,
            A.BOOK_TYPE_CODE,
            A.LAST_PRINTED_DATE,
            A.PRINTED_COUNT,
            A.CREATED_BY, 
            A.CREATION_DATE, 
            A.LAST_UPDATE_BY, 
            A.LAST_UPDATE_DATE,
            (SELECT L_SUGEST.description SO_SUGEST
                    FROM SOC_STOCK_OPNAME_DTL SD
                         INNER JOIN SOC_STOCK_OPNAME_HDR HD
                            ON     SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID
                               AND HD.STATUS_CODE = 'SO_STATUS_APPROVED'
                         LEFT JOIN BSE_LOOKUP_DEPENDENTS L_SUGEST
                            ON L_SUGEST.DETAIL_CODE = SD.OPNAME_SUGEST_CODE
                   WHERE     A.ASSET_ID = SD.ASSET_ID
                         AND hd.branch_id = A.branch_id
                         AND hd.company_id = A.company_id
                         AND ROWNUM = 1)SO_SUGEST
         FROM SOC_ASSETS A
	        LEFT JOIN SAM_USERS U ON U.USER_ID = A.LAST_UPDATE_BY
	        where A.asset_id NOT IN (SELECT asset_id
                                  FROM soc_transfer_dtl td
                                       INNER JOIN soc_transfer_hdr th
                                          ON th.transfer_id = td.transfer_id
                                 WHERE     th.branch_id = A.branch_id
                                       and th.status_code in('ASSET_TRANSFER_APPROVED','ASSET_TRANSFER_INPROCESS',
                                                              'ASSET_TRANSFER_COMPLETED')
                                       ))A	
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
   and A.asset_number is not null
  </select>
  
  <select id="getSOResultByAssetId" parameterType="java.lang.Long" resultMap="detailAssets">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    SELECT STOCK_OPNAME_DTL_ID,
       L_RESULT.description SO_RESULT,
       L_SUGEST.description SO_SUGEST,
       L_HO_SUGEST.description SO_HO_SUGEST
  FROM SOC_STOCK_OPNAME_DTL SD
       INNER JOIN SOC_STOCK_OPNAME_HDR HD
          ON     SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID
             AND HD.STATUS_CODE = 'SO_STATUS_APPROVED'
       LEFT JOIN BSE_LOOKUP_DEPENDENTS L_RESULT
          ON L_RESULT.DETAIL_CODE = SD.OPNAME_RESULT_CODE
       LEFT JOIN BSE_LOOKUP_DEPENDENTS L_SUGEST
          ON L_SUGEST.DETAIL_CODE = SD.OPNAME_SUGEST_CODE
       LEFT JOIN BSE_LOOKUP_DEPENDENTS L_HO_SUGEST
          ON L_HO_SUGEST.DETAIL_CODE = SD.OPNAME_HO_SUGEST_CODE
   WHERE #{assetId,jdbcType=DECIMAL} = SD.ASSET_ID and rownum = 1
   UNION ALL
   SELECT STOCK_OPNAME_UNREG_ASSET_ID STOCK_OPNAME_DTL_ID,
       L_RESULT.description SO_RESULT,
       L_SUGEST.description SO_SUGEST,
       L_HO_SUGEST.description SO_HO_SUGEST
  FROM SOC_STOCK_OPNAME_UNREG_ASSETS SD
       INNER JOIN SOC_STOCK_OPNAME_HDR HD
          ON     SD.STOCK_OPNAME_ID = HD.STOCK_OPNAME_ID
             AND HD.STATUS_CODE = 'SO_STATUS_APPROVED'
       LEFT JOIN BSE_LOOKUP_DEPENDENTS L_RESULT
          ON L_RESULT.DETAIL_CODE = SD.OPNAME_RESULT_CODE
       LEFT JOIN BSE_LOOKUP_DEPENDENTS L_SUGEST
          ON L_SUGEST.DETAIL_CODE = SD.OPNAME_SUGEST_CODE
       LEFT JOIN BSE_LOOKUP_DEPENDENTS L_HO_SUGEST
          ON L_HO_SUGEST.DETAIL_CODE = SD.OPNAME_HO_SUGEST_CODE
   WHERE #{assetId,jdbcType=DECIMAL} = SD.ASSET_ID and rownum = 1
  </select>
</mapper>