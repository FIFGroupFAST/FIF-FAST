<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.id.fifgroup.ssoa.dao.StockOpnameUnregAssetsMapper">
	<resultMap id="BaseResultMap"
		type="co.id.fifgroup.ssoa.dto.StockOpnameUnregAssetsDTO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
		<id column="STOCK_OPNAME_UNREG_ASSET_ID" jdbcType="DECIMAL"
			property="id" />
		<result column="STOCK_OPNAME_ID" jdbcType="DECIMAL" property="stockOpnameId" />
		<result column="ASSET_ID" jdbcType="DECIMAL" property="assetId" />
		<result column="ASSET_NUMBER" jdbcType="DECIMAL" property="assetNo" />
		<result column="TAG_NUMBER" jdbcType="VARCHAR" property="tagNumber" />
		<result column="SERIAL_NUMBER" jdbcType="VARCHAR" property="serialNumber" />
		<result column="DESCRIPTION" jdbcType="VARCHAR" property="description" />
		<result column="CATEGORY_ID" jdbcType="DECIMAL" property="categoryId" />
		<result column="CATEGORY_NAME" jdbcType="VARCHAR" property="categoryName" />
		<result column="COMPANY_ID" jdbcType="DECIMAL" property="companyId" />
		<result column="BRANCH_ID" jdbcType="DECIMAL" property="branchId" />
		<result column="BRANCH_CODE" jdbcType="VARCHAR" property="branchCode" />
		<result column="BRANCH_NAME" jdbcType="VARCHAR" property="branchName" />
		<result column="LOCATION_ID" jdbcType="DECIMAL" property="locationId" />
		<result column="LOCATION_CODE" jdbcType="VARCHAR" property="locationCode" />
        <result column="LOCATION_NAME" jdbcType="VARCHAR" property="locationName" />
		
		<result column="DATE_PLACED_IN_SERVICE" jdbcType="DATE" property="datePlacedInService" />
		<result column="DATE_PLACED_IN_SERVICE" jdbcType="DATE" property="dateOfService" />
		<result column="LIFE_IN_MONTHS" jdbcType="DECIMAL" property="lifeInMonths" />
		
		<result column="ORIGINAL_COST" jdbcType="DECIMAL" property="originalCost" />
		<result column="UNREVALUED_COST" jdbcType="DECIMAL" property="unrevaluedCost" />
		<result column="BOOK_TYPE_CODE" jdbcType="VARCHAR" property="bookTypeCode" />
		<result column="OPNAME_RESULT_ID" jdbcType="DECIMAL" property="opnameResultId" />
		<result column="OPNAME_RESULT_CODE" jdbcType="VARCHAR" property="opnameResultCode" />
		<result column="OPNAME_RESULT" jdbcType="VARCHAR" property="opnameResult" />
		<result column="OPNAME_SUGEST_ID" jdbcType="DECIMAL" property="opnameSugestId" />
		<result column="OPNAME_SUGEST_CODE" jdbcType="VARCHAR" property="opnameSugestCode" />
		<result column="OPNAME_SUGEST" jdbcType="VARCHAR" property="opnameSugest" />
		<result column="OPNAME_HO_SUGEST_ID" jdbcType="DECIMAL" property="opnameHOSugestId" />
		<result column="OPNAME_HO_SUGEST_CODE" jdbcType="VARCHAR" property="opnameHOSugestCode" />
		<result column="OPNAME_HO_SUGEST" jdbcType="VARCHAR" property="opnameHOSugest" />
		<result column="ASSET_TYPE_ID" jdbcType="DECIMAL" property="assetTypeId" />
		<result column="ASSET_TYPE_CODE" jdbcType="VARCHAR" property="assetTypeCode" />
		<result column="ASSET_TYPE" jdbcType="VARCHAR" property="assetType" />
		<result column="OPNAME_ACTION_STATUS_ID" jdbcType="DECIMAL" property="opnameActionStatusId" />
		<result column="OPNAME_ACTION_STATUS_CODE" jdbcType="VARCHAR" property="opnameActionStatusCode" />
		<result column="OPNAME_ACTION_STATUS" jdbcType="VARCHAR" property="opnameActionStatus" />
		<result column="POSITION" jdbcType="VARCHAR" property="position" />
		<result column="NET_BOOK_VALUE" jdbcType="DECIMAL" property="netBookValue" />
		<result column="CREATED_BY" jdbcType="DECIMAL" property="createdBy" />
		<result column="CREATED_BY_NAME" jdbcType="VARCHAR" property="createdByName" />
		<result column="CREATION_DATE" jdbcType="TIMESTAMP" property="creationDate" />
		<result column="LAST_UPDATE_BY" jdbcType="DECIMAL" property="lastUpdateBy" />
		<result column="LAST_UPDATE_BY_NAME" jdbcType="VARCHAR" property="lastUpdateByName" />
		<result column="LAST_UPDATE_DATE" jdbcType="TIMESTAMP"
			property="lastUpdateDate" />
	</resultMap>

	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
	so.STOCK_OPNAME_UNREG_ASSET_ID,
	so.STOCK_OPNAME_ID,
	so.ASSET_ID,
	ASSET_NUMBER,
	so.TAG_NUMBER,
	so.SERIAL_NUMBER,
	(case when so.DESCRIPTION is not null then so.DESCRIPTION else sa.DESCRIPTION end) DESCRIPTION,
	so.CATEGORY_ID,
	so.COMPANY_ID,
	so.BRANCH_ID,
	(case when so.BRANCH_ID = -1 then 'HEADOFFICE' else (SELECT SUBSTR (ORGANIZATION_CODE, -5) as branch_code from WOS_ORGANIZATIONS where ORGANIZATION_ID = so.BRANCH_ID and rownum =1)end) BRANCH_CODE,
    (case when so.BRANCH_ID = -1 then 'Head Office' else(SELECT ORGANIZATION_NAME from WOS_ORGANIZATIONS where ORGANIZATION_ID = so.BRANCH_ID and rownum =1)end) BRANCH_NAME,
	so.LOCATION_ID,
    (SELECT LOCATION_CODE from WOS_LOCATIONS where LOCATION_ID = so.LOCATION_ID and rownum =1) LOCATION_CODE,
    (SELECT LOCATION_NAME from WOS_LOCATIONS where LOCATION_ID = so.LOCATION_ID and rownum =1) LOCATION_NAME,
	so.DATE_PLACED_IN_SERVICE,
	so.LIFE_IN_MONTHS,
	so.ORIGINAL_COST,
	so.UNREVALUED_COST,
	so.BOOK_TYPE_CODE,
	so.ASSET_TYPE_ID,
	so.ASSET_TYPE_CODE,
	so.POSITION,
	so.OPNAME_ACTION_STATUS_ID, NET_BOOK_VALUE,
	so.OPNAME_ACTION_STATUS_CODE,(select DESCRIPTION from BSE_LOOKUP_DEPENDENTS where LOOKUP_ID = OPNAME_ACTION_STATUS_ID and DETAIL_CODE = OPNAME_ACTION_STATUS_CODE and rownum =1) OPNAME_ACTION_STATUS,
	OPNAME_RESULT_ID,OPNAME_RESULT_CODE,(select DESCRIPTION from BSE_LOOKUP_DEPENDENTS where LOOKUP_ID = OPNAME_RESULT_ID and DETAIL_CODE = OPNAME_RESULT_CODE and rownum =1) OPNAME_RESULT,
    OPNAME_SUGEST_ID,OPNAME_SUGEST_CODE,(select DESCRIPTION from BSE_LOOKUP_DEPENDENTS where LOOKUP_ID = OPNAME_SUGEST_ID and DETAIL_CODE = OPNAME_SUGEST_CODE and rownum =1) OPNAME_SUGEST,
    OPNAME_HO_SUGEST_ID,OPNAME_HO_SUGEST_CODE,(select DESCRIPTION from BSE_LOOKUP_DEPENDENTS where LOOKUP_ID = OPNAME_HO_SUGEST_ID and DETAIL_CODE = OPNAME_HO_SUGEST_CODE and rownum =1) OPNAME_HO_SUGEST,
	SU.USER_NAME CREATED_BY_NAME, so.CREATION_DATE, U.USER_NAME LAST_UPDATE_BY_NAME, so.LAST_UPDATE_DATE, EC.segment1 CATEGORY_NAME,
	(select description from bse_lookup_dependents where detail_code = so.asset_type_code) as ASSET_TYPE
	</sql>
	
	<sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>

	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
		select 'false' as QUERYID,
		<include refid="Base_Column_List" />
		from SOC_STOCK_OPNAME_UNREG_ASSETS so left join SOC_ASSETS sa on sa.asset_id = so.asset_id 
		LEFT JOIN SAM_USERS U ON U.USER_ID = so.LAST_UPDATE_BY
        LEFT JOIN SAM_USERS SU ON SU.USER_ID = so.CREATED_BY
        LEFT JOIN SOC_EBS_CATEGORIES EC ON EC.CATEGORY_ID = so.CATEGORY_ID
		where STOCK_OPNAME_UNREG_ASSET_ID = #{id,jdbcType=VARCHAR}
	</select>

	<select id="selectByHeaderKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
		select 'false' as QUERYID,
		<include refid="Base_Column_List" />
		from SOC_STOCK_OPNAME_UNREG_ASSETS so left join SOC_ASSETS sa on sa.asset_id = so.asset_id 
		LEFT JOIN SAM_USERS U ON U.USER_ID = so.LAST_UPDATE_BY
        LEFT JOIN SAM_USERS SU ON SU.USER_ID = so.CREATED_BY
        LEFT JOIN SOC_EBS_CATEGORIES EC ON EC.CATEGORY_ID = so.CATEGORY_ID
		where STOCK_OPNAME_ID = #{id,jdbcType=DECIMAL}
	</select>
	
	<select id="selectByExample" parameterType="co.id.fifgroup.ssoa.domain.StockOpnameUnregAssetsExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    'false' as QUERYID,
    <include refid="Base_Column_List" />
    from SOC_STOCK_OPNAME_UNREG_ASSETS so left join SOC_ASSETS sa on sa.asset_id = so.asset_id 
    LEFT JOIN SAM_USERS U ON U.USER_ID = so.LAST_UPDATE_BY
    LEFT JOIN SAM_USERS SU ON SU.USER_ID = so.CREATED_BY
    LEFT JOIN SOC_EBS_CATEGORIES EC ON EC.CATEGORY_ID = so.CATEGORY_ID
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>

	<select id="selectByBranchCode" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
		select 'false' as QUERYID,
		<include refid="Base_Column_List" />
		from SOC_STOCK_OPNAME_UNREG_ASSETS so left join SOC_ASSETS sa on sa.asset_id = so.asset_id 
		LEFT JOIN SAM_USERS U ON U.USER_ID = so.LAST_UPDATE_BY
        LEFT JOIN SAM_USERS SU ON SU.USER_ID = so.CREATED_BY
        LEFT JOIN SOC_EBS_CATEGORIES EC ON EC.CATEGORY_ID = so.CATEGORY_ID
		where BRANCH_ID = #{branchId,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
		delete from SOC_STOCK_OPNAME_UNREG_ASSETS
		where STOCK_OPNAME_UNREG_ASSET_ID = #{id,jdbcType=DECIMAL}
	</delete>
	<insert id="insert" parameterType="co.id.fifgroup.ssoa.dto.StockOpnameUnregAssetsDTO">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Mar 19 
			22:59:29 ICT 2013. -->
		<selectKey keyProperty="id" order="BEFORE" resultType="java.lang.Long">
			select SOC_STOCK_OPNAME_UNREG_ASSET_S.nextVal from dual
		</selectKey>

	insert into SOC_STOCK_OPNAME_UNREG_ASSETS (STOCK_OPNAME_UNREG_ASSET_ID,
	STOCK_OPNAME_ID,
	ASSET_ID,
	TAG_NUMBER,
	SERIAL_NUMBER,
	DESCRIPTION,
	CATEGORY_ID,
	COMPANY_ID,
	BRANCH_ID,
	LOCATION_ID,
	DATE_PLACED_IN_SERVICE,
	LIFE_IN_MONTHS,
	ORIGINAL_COST,
	UNREVALUED_COST,
	BOOK_TYPE_CODE,
	OPNAME_RESULT_ID,
	OPNAME_RESULT_CODE,
	OPNAME_SUGEST_ID,
	OPNAME_SUGEST_CODE,
	OPNAME_HO_SUGEST_ID,
	OPNAME_HO_SUGEST_CODE,
	OPNAME_ACTION_STATUS_ID,
	OPNAME_ACTION_STATUS_CODE,
	ASSET_TYPE_ID,
	ASSET_TYPE_CODE,
	POSITION,
	CREATED_BY, 
	CREATION_DATE, 
	LAST_UPDATE_BY,
	LAST_UPDATE_DATE)
	values (#{id,jdbcType=DECIMAL},
	#{stockOpnameId,jdbcType=DECIMAL},
	#{assetId,jdbcType=DECIMAL},
	#{tagNumber,jdbcType=VARCHAR},
	#{serialNumber,jdbcType=VARCHAR},
	#{description,jdbcType=VARCHAR},
	#{categoryId,jdbcType=DECIMAL},
	#{companyId,jdbcType=DECIMAL},
	#{branchId,jdbcType=DECIMAL},
	#{locationId,jdbcType=DECIMAL},
	#{datePlacedInService,jdbcType=DATE},
	#{lifeInMonths,jdbcType=DECIMAL},
	#{originalCost,jdbcType=DECIMAL},
	#{unrevaluedCost,jdbcType=DECIMAL},
	#{bookTypeCode,jdbcType=VARCHAR},
	#{opnameResultId,jdbcType=DECIMAL},
	#{opnameResultCode,jdbcType=VARCHAR},
	#{opnameSugestId,jdbcType=DECIMAL},
	#{opnameSugestCode,jdbcType=VARCHAR},
	#{opnameHOSugestId,jdbcType=DECIMAL},
	#{opnameHOSugestCode,jdbcType=VARCHAR},
	#{opnameActionStatusId,jdbcType=DECIMAL},
	#{opnameActionStatusCode,jdbcType=VARCHAR},
	#{assetTypeId,jdbcType=DECIMAL},
	#{assetTypeCode,jdbcType=VARCHAR},
	#{position,jdbcType=VARCHAR},
	#{createdBy,jdbcType=DECIMAL},
	#{creationDate,jdbcType=TIMESTAMP},
	#{lastUpdateBy,jdbcType=DECIMAL},
	#{lastUpdateDate,jdbcType=TIMESTAMP})
	</insert>
	
	<update id="updateByPrimaryKey" parameterType="co.id.fifgroup.ssoa.dto.StockOpnameUnregAssetsDTO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
	update SOC_STOCK_OPNAME_UNREG_ASSETS
	set STOCK_OPNAME_ID = #{stockOpnameId,jdbcType=VARCHAR},
	ASSET_ID = #{assetId,jdbcType=DECIMAL},
	TAG_NUMBER = #{tagNumber,jdbcType=VARCHAR},
	SERIAL_NUMBER = #{serialNumber,jdbcType=VARCHAR},
	DESCRIPTION = #{description,jdbcType=VARCHAR},
	CATEGORY_ID = #{categoryId,jdbcType=VARCHAR},
	COMPANY_ID = #{companyId,jdbcType=VARCHAR},
	BRANCH_ID = #{branchId,jdbcType=VARCHAR},
	LOCATION_ID = #{locationId,jdbcType=DECIMAL},
	DATE_PLACED_IN_SERVICE = #{datePlacedInService,jdbcType=DATE},
	LIFE_IN_MONTHS = #{lifeInMonths,jdbcType=DECIMAL},
	ORIGINAL_COST = #{originalCost,jdbcType=DECIMAL},
	UNREVALUED_COST = #{unrevaluedCost,jdbcType=DECIMAL},
	BOOK_TYPE_CODE = #{bookTypeCode,jdbcType=VARCHAR},
	OPNAME_RESULT_ID = #{opnameResultId,jdbcType=DECIMAL},
	OPNAME_RESULT_CODE = #{opnameResultCode,jdbcType=VARCHAR},
	OPNAME_SUGEST_ID = #{opnameSugestId,jdbcType=DECIMAL},
	OPNAME_SUGEST_CODE = #{opnameSugestCode,jdbcType=VARCHAR},
	OPNAME_HO_SUGEST_ID = #{opnameHOSugestId,jdbcType=DECIMAL},
	OPNAME_HO_SUGEST_CODE = #{opnameHOSugestCode,jdbcType=VARCHAR},
	OPNAME_ACTION_STATUS_CODE = #{opnameActionStatusCode,jdbcType=VARCHAR},
    OPNAME_ACTION_STATUS_ID = #{opnameActionStatusId,jdbcType=DECIMAL},
    ASSET_TYPE_CODE = #{assetTypeCode,jdbcType=VARCHAR},
    ASSET_TYPE_ID = #{assetTypeId,jdbcType=DECIMAL},
    POSITION = #{position,jdbcType=VARCHAR},
	CREATED_BY = #{createdBy,jdbcType=DECIMAL},
	CREATION_DATE = #{creationDate,jdbcType=TIMESTAMP},
	LAST_UPDATE_BY = #{lastUpdateBy,jdbcType=DECIMAL},
	LAST_UPDATE_DATE = #{lastUpdateDate,jdbcType=TIMESTAMP}
	where STOCK_OPNAME_UNREG_ASSET_ID = #{id,jdbcType=DECIMAL}
  </update>
  
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  
  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    update SOC_STOCK_OPNAME_UNREG_ASSETS
    <set>
    
      <if test="record.id != null">
        STOCK_OPNAME_UNREG_ASSET_ID = #{record.id,jdbcType=DECIMAL},
      </if>
      <if test="record.stockOpnameId != null">
        STOCK_OPNAME_ID = #{record.stockOpnameId,jdbcType=DECIMAL},
      </if>
      <if test="record.assetId != null">
        ASSET_ID = #{record.assetId,jdbcType=DECIMAL},
      </if>
      <if test="record.opnameActionStatusCde != null">
        OPNAME_ACTION_STATUS_CODE = #{record.opnameActionStatusCode,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  
  <select id="selectByHeaderIdAndAssetId" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    select 'false' as QUERYID,
    <include refid="Base_Column_List" />
    from SOC_STOCK_OPNAME_UNREG_ASSETS so left join SOC_ASSETS sa on sa.asset_id = so.asset_id 
    LEFT JOIN SAM_USERS U ON U.USER_ID = so.LAST_UPDATE_BY
    LEFT JOIN SAM_USERS SU ON SU.USER_ID = so.CREATED_BY
    LEFT JOIN SOC_EBS_CATEGORIES EC ON EC.CATEGORY_ID = so.CATEGORY_ID
    where STOCK_OPNAME_ID = #{soId,jdbcType=DECIMAL} and sa.ASSET_ID = #{assetId,jdbcType=DECIMAL}
  </select>
  
  <update id="updateOpnameStatus" parameterType="co.id.fifgroup.ssoa.dto.StockOpnameUnregAssetsDTO">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 19 22:59:29 ICT 2013.
    -->
    update SOC_STOCK_OPNAME_UNREG_ASSETS
    set 
      OPNAME_ACTION_STATUS_ID = #{opnameActionStatusId,jdbcType=DECIMAL},
      OPNAME_ACTION_STATUS_CODE = #{opnameActionStatusCode,jdbcType=VARCHAR}
    where STOCK_OPNAME_UNREG_ASSET_ID = #{id,jdbcType=DECIMAL}
  </update>

</mapper>